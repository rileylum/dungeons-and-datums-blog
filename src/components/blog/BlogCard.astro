---
import type { BlogPost } from '../../utils/blog';
import { calculateReadingTime } from '../../utils/blog';
import TagList from './TagList.astro';

interface Props {
  post: BlogPost;
}

const { post } = Astro.props;
const { title, description, pubDate, category, tags, heroImage, heroImageAlt } =
  post.data;
const readingTime = calculateReadingTime(post.body);

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<article class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow">
  {
    heroImage && (
      <figure>
        <img
          src={heroImage}
          alt={heroImageAlt || title}
          class="w-full h-48 object-cover"
        />
      </figure>
    )
  }
  <div class="card-body">
    <div class="flex items-center gap-2 text-sm text-base-content/60">
      <time datetime={pubDate.toISOString()}>{formattedDate}</time>
      <span>•</span>
      <span>{readingTime} min read</span>
      <span>•</span>
      <a
        href={`/blog/category/${category.toLowerCase()}`}
        class="badge badge-primary badge-sm"
      >
        {category}
      </a>
    </div>

    <h2 class="card-title">
      <a href={`/blog/${post.slug}`} class="hover:text-primary transition-colors">
        {title}
      </a>
    </h2>

    <p class="text-base-content/80">{description}</p>

    <div class="card-actions justify-between items-center mt-4">
      <TagList tags={tags} />
      <a href={`/blog/${post.slug}`} class="btn btn-primary btn-sm">
        Read More
      </a>
    </div>
  </div>
</article>
