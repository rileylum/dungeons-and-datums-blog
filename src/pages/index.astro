---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/blog/BlogCard.astro';
import Pagination from '../components/blog/Pagination.astro';
import { getPublishedPosts } from '../utils/blog';

const postsPerPage = 10;
const allPosts = await getPublishedPosts();
const currentPage = 1;
const totalPages = Math.ceil(allPosts.length / postsPerPage);
const posts = allPosts.slice(0, postsPerPage);
---

<BaseLayout title="Dungeons and Datums" description="A blog about dungeons and datums">
  <div class="max-w-4xl mx-auto px-4 py-8">
    <header class="mb-12 text-center">
      <h1 class="text-5xl font-bold mb-4">Dungeons and Datums</h1>
      <p class="text-xl text-base-content/70">
        Exploring the intersection of role-playing games and data science
      </p>
    </header>

    <div class="flex flex-col gap-6 mb-12">
      {posts.map((post) => <BlogCard post={post} />)}
    </div>

    {
      posts.length === 0 && (
        <div class="text-center py-12">
          <p class="text-xl text-base-content/60">
            No posts yet. Check back soon!
          </p>
        </div>
      )
    }

    <div class="flex justify-center">
      <Pagination
        currentPage={currentPage}
        totalPages={totalPages}
        baseUrl="/"
      />
    </div>
  </div>
</BaseLayout>
