---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ResourceCard from '../../../components/resources/ResourceCard.astro';
import {
  getAllCategories,
  getResourcesByCategory,
} from '../../../utils/resources';

export async function getStaticPaths() {
  const categories = await getAllCategories();
  return categories.map((category) => ({
    params: { category: category.toLowerCase() },
    props: { category },
  }));
}

const { category } = Astro.props;
const resources = await getResourcesByCategory(category);
---

<BaseLayout
  title={`${category} Resources`}
  description={`All resources in the ${category} category`}
>
  <div class="max-w-6xl mx-auto px-4 py-8">
    <header class="mb-12 text-center">
      <h1 class="text-5xl font-bold mb-4">{category}</h1>
      <p class="text-xl text-base-content/70">
        {resources.length} {resources.length === 1 ? 'resource' : 'resources'} in
        this category
      </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
      {resources.map((resource) => <ResourceCard resource={resource} />)}
    </div>

    {
      resources.length === 0 && (
        <div class="text-center py-12">
          <p class="text-xl text-base-content/60">
            No resources found in this category.
          </p>
        </div>
      )
    }
  </div>
</BaseLayout>
